{"version":3,"sources":["script.js"],"names":["darkButton","document","getElementById","lightButton","addTransition","querySelector","style","transition","setDarkMode","body","classList","localStorage","setItem","setLightMode","colorModeFromLocalStorage","getItem","colorModeFromPreferences","window","matchMedia","matches","loadAndUpdateColor","click","radioButtons","querySelectorAll","forEach","button","addEventListener","event","checked"],"mappings":"AAAA,aAWA,IAAMA,WAAaC,SAASC,eAAe,QACrCC,YAAcF,SAASC,eAAe,SAGtCE,cAAgB,WACPH,SAASI,cAAc,QAC/BC,MAAMC,WAAa,6CAC1B,EAEMC,YAAc,WAClB,IAAMC,EAAOR,SAASI,cAAc,QACpCD,gBACAK,EAAKC,UAAY,OACjBC,aAAaC,QAAQ,YAAa,OACpC,EAEMC,aAAe,WACnB,IAAMJ,EAAOR,SAASI,cAAc,QACpCD,gBACAK,EAAKC,UAAY,QACjBC,aAAaC,QAAQ,YAAa,QACpC,EAEME,0BAA4B,WAChC,OAAOH,aAAaI,QAAQ,YAC9B,EAEMC,yBAA2B,WAC/B,OAAOC,OAAOC,WAAW,gCAAgCC,QACrD,OACA,OACN,EAEMC,mBAAqB,WAGhB,SADKN,6BAA+BE,4BAC3BhB,WAAWqB,QAAUlB,YAAYkB,OACrD,EAGMC,aAAerB,SAASsB,iBAAiB,0BAC/CD,aAAaE,SAAQ,SAACC,GACpBA,EAAOC,iBAAiB,SAAS,SAACC,GAChC3B,WAAW4B,QAAUpB,cAAgBK,cACvC,GACF,IAIAI,OACGC,WAAW,gCACXQ,iBAAiB,UAAU,SAACC,GAC3BA,EAAMR,QAAUnB,WAAWqB,QAAUlB,YAAYkB,OACnD,IAGFD","file":"script.js","sourcesContent":["/* \r\nThe first time the page is loaded, the color mode set on the preference \r\nis used and set as 'default' in the local storage. \r\nChanging the default preferences works the same way as changing the \r\ncolor mode using the buttons, if the page is loaded.\r\nWhen the page is reloaded, whatever is the value set on the local storage\r\nhas precedence over the values in the preference. If the preference\r\nchanged after the page was visited - and the page is not loaded - \r\nthe last value saved on the local storage is loaded. \r\n*/\r\n\r\nconst darkButton = document.getElementById(\"dark\");\r\nconst lightButton = document.getElementById(\"light\");\r\n\r\n// Add transition class to body\r\nconst addTransition = () => {\r\n  const body = document.querySelector(\"body\");\r\n  body.style.transition = \"background-color 0.5s ease, color 0.5s ease\";\r\n};\r\n\r\nconst setDarkMode = () => {\r\n  const body = document.querySelector(\"body\");\r\n  addTransition();\r\n  body.classList = \"dark\";\r\n  localStorage.setItem(\"colorMode\", \"dark\");\r\n};\r\n\r\nconst setLightMode = () => {\r\n  const body = document.querySelector(\"body\");\r\n  addTransition();\r\n  body.classList = \"light\";\r\n  localStorage.setItem(\"colorMode\", \"light\");\r\n};\r\n\r\nconst colorModeFromLocalStorage = () => {\r\n  return localStorage.getItem(\"colorMode\");\r\n};\r\n\r\nconst colorModeFromPreferences = () => {\r\n  return window.matchMedia(\"(prefers-color-scheme: dark)\").matches\r\n    ? \"dark\"\r\n    : \"light\"; // If preference is set or does not match anything (light is default)\r\n};\r\n\r\nconst loadAndUpdateColor = () => {\r\n  // local storage has precedence over the prefers-color-scheme\r\n  const color = colorModeFromLocalStorage() || colorModeFromPreferences();\r\n  color == \"dark\" ? darkButton.click() : lightButton.click();\r\n};\r\n\r\n// when the inputs are clicked, check which radio button is checked and change the color\r\nconst radioButtons = document.querySelectorAll(\".toggle__wrapper input\");\r\nradioButtons.forEach((button) => {\r\n  button.addEventListener(\"click\", (event) => {\r\n    darkButton.checked ? setDarkMode() : setLightMode();\r\n  });\r\n});\r\n\r\n// when the prefers-color-scheme changes, this event will be emitted\r\n// event reflects the media query, if it matches, the new color is dark, else it is light\r\nwindow\r\n  .matchMedia(\"(prefers-color-scheme: dark)\")\r\n  .addEventListener(\"change\", (event) => {\r\n    event.matches ? darkButton.click() : lightButton.click();\r\n  });\r\n\r\n// Load the right color on startup - localStorage has precedence\r\nloadAndUpdateColor();\r\n"]}